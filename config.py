import cv2
import numpy as np

RPPG_METHOD = 'tscan'

TSCAN_MODEL_PATH = "models/UBFC_TSCAN.pth"

TSCAN_FRAME_DEPTH = 10
TSCAN_INPUT_SIZE = (36, 36)
TSCAN_BATCH_SIZE = 1
TSCAN_USE_GPU = False

TSCAN_NORMALIZE_METHOD = 'standard'

CAMERA_INDEX = 1
FALLBACK_CAMERA_INDEX = 0
BUFFER_SIZE = 300
FS_TARGET = 30.0

BVP_FILTER_LOW = 0.7
BVP_FILTER_HIGH = 3.0
BVP_FILTER_ORDER = 2

RESP_FILTER_LOW = 0.1
RESP_FILTER_HIGH = 0.5
RESP_FILTER_ORDER = 4

ENABLE_ADAPTIVE_FILTER = True
ADAPTIVE_FILTER_MARGIN = 0.3

BVP_SMOOTH_WINDOW = 5

HR_PEAK_PROMINENCE_FACTOR = 0.6
HR_PEAK_DISTANCE_FACTOR = 0.4

HR_MIN_VALID = 30
HR_MAX_VALID = 200

RR_MIN_VALID = 0.3
RR_MAX_VALID = 2.0

LF_MIN = 0.04
LF_MAX = 0.15
HF_MIN = 0.15
HF_MAX = 0.4

WELCH_NPERSEG = 256

RESP_MIN_PEAK_DISTANCE = 2.0
RESP_MAX_PEAK_DISTANCE = 10.0

RR_BREATHING_MIN = 6
RR_BREATHING_MAX = 35

RESP_PROMINENCE_FACTOR = 0.3


PI_MIN = 0.1
PI_MAX = 20.0

PI_CLAMP_MIN = 0.3
PI_CLAMP_MAX = 10.0


SPO2_METHOD = 'display_only'

SPO2_DISPLAY_VALUE = 97
SPO2_DISPLAY_VARIANCE = 2


LOW_LIGHT_THRESHOLD = 70
OPTIMAL_BRIGHTNESS_MIN = 80
OPTIMAL_BRIGHTNESS_MAX = 180
BRIGHT_LIGHT_THRESHOLD = 220

SNR_POOR_THRESHOLD = -10
SNR_FAIR_THRESHOLD = 5
SNR_GOOD_THRESHOLD = 15

MIN_FPS_FOR_PROCESSING = 6.5

EMA_HR = 0.2
EMA_HRV = 0.2
EMA_RR = 0.25
EMA_RPI = 0.2
EMA_PI = 0.3
EMA_STRESS = 0.3
EMA_SPO2 = 0.15

CLAMP_HR = (45, 160)
CLAMP_HRV = (10, 150)
CLAMP_RR = (6, 35)
CLAMP_PI = (0.1, 20)
CLAMP_STRESS = (0, 100)
CLAMP_SPO2 = (90, 100)

FOREHEAD_INDICES = [70, 69, 67, 105, 107, 297, 299, 300]
LEFT_CHEEK_INDICES = [117, 118, 119, 120, 147, 213, 205]
RIGHT_CHEEK_INDICES = [346, 347, 348, 349, 376, 433, 425]

HEAD_YAW_THRESHOLD = 0.05

ROI_COLORS = {
    "forehead": (0, 120, 255),
    "l_cheek": (60, 220, 50),
    "r_cheek": (60, 220, 50)
}

USE_WINDOWED_NORMALIZATION = True

RPPG_COLOR_SPACE = 'RGB'

EPSILON = 1e-6

STRESS_SDNN_THRESHOLD_HIGH = 80
STRESS_SDNN_THRESHOLD_LOW = 30

STRESS_CALCULATION_METHOD = 'sdnn_only'

MEDIAPIPE_STATIC_IMAGE_MODE = False
MEDIAPIPE_MAX_NUM_FACES = 1
MEDIAPIPE_REFINE_LANDMARKS = True
MEDIAPIPE_MIN_DETECTION_CONFIDENCE = 0.5
MEDIAPIPE_MIN_TRACKING_CONFIDENCE = 0.5

DEBUG_MODE = True
SHOW_FPS_COUNTER = True
SHOW_SIGNAL_QUALITY_METER = False
SHOW_BUFFER_FILL_STATE = True
SHOW_WAVEFORM = True

WINDOW_WIDTH = 800
WINDOW_HEIGHT = 600
WAVEFORM_WINDOW_WIDTH = 600
WAVEFORM_WINDOW_HEIGHT = 300

FONT = cv2.FONT_HERSHEY_SIMPLEX
FONT_SCALE = 0.6
FONT_THICKNESS = 1
FONT_COLOR = (255, 255, 255)

# Face Mesh (White/Gray)
COLOR_MESH_SUBTLE = (200, 200, 200)      
COLOR_MESH_FEATURE = (230, 230, 230)     
COLOR_MESH_LIPS = (255, 255, 255)     
# ROI & Dots 
COLOR_ROI_BOX = (0, 255, 0)        
COLOR_DOT_GOOD = (0, 255, 0)       
COLOR_DOT_BAD = (0, 100, 0)     
COLOR_ROI_FONT = (0, 0, 255)   
# Panel & UI
COLOR_TEXT_PANEL = (255, 255, 255) 
COLOR_TEXT_NOTIFY = (255, 255, 255) 
COLOR_PANEL_BG = (0, 0, 0)         
# Waveform
COLOR_WAVEFORM_BG = (0, 0, 0)  
COLOR_WAVEFORM_LINE = (0, 180, 0)    
COLOR_WAVEFORM_PEAK = (0, 0, 255)    
COLOR_GRID = (230, 230, 230)      
COLOR_TITLE = (50, 50, 50)       

print("Config loaded successfully!")